- name: midas-test
  command: bash -c 'nextflow run ./subworkflows/local/midas/test.nf -entry test_midas --wf midas -c nextflow.config ${BACTOPIA_ARGS}'
  tags:
    - midas
    - bactopia-tools
  files:
    - path: bactopia-tools/midas/midas/SRR2838702/SRR2838702.midas.tsv
      md5sum: 6078fbf9d5c44a56afeb7a42836b14d2
    - path: bactopia-tools/midas/midas/SRR2838702/SRR2838702.midas.abundances.txt
      md5sum: 91f71c7f652445afe3d6d573155ec41b
    - path: bactopia-tools/midas/midas/SRR2838702/SRR2838702.midas.adjusted.abundances.txt
      md5sum: 3658eb6a56f27a066c88eccd22490808
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/nf-midas.begin
      md5sum: d41d8cd98f00b204e9800998ecf8427e
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/nf-midas.err
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/nf-midas.log
      contains: ['MIDAS', 'Command', 'Classifying']
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/nf-midas.out
      contains: ['MIDAS', 'Command', 'Classifying']
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/nf-midas.run
      contains: ['NEXTFLOW TASK', '$NXF_ENTRY']
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/nf-midas.sh
      contains: ['run_midas', 'END_VERSIONS']
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/nf-midas.trace
      contains: ['nextflow.trace']
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/versions.yml
      md5sum: 4e71a163042a3c1bcdb42357031240ce
    - path: bactopia-tools/midas/midas/nf-reports/midas-dag.dot
      contains: ['midasdag', 'MIDAS_SPECIES', 'versions']
    - path: bactopia-tools/midas/midas/nf-reports/midas-report.html
      contains: ['html', 'Nextflow', 'Report']
    - path: bactopia-tools/midas/midas/nf-reports/midas-timeline.html
      contains: ['html', 'Nextflow', 'timeline']
    - path: bactopia-tools/midas/midas/nf-reports/midas-trace.txt
      contains: ['task_id']

- name: midas-test-tarball
  command: bash -c 'nextflow run ./subworkflows/local/midas/test.nf -entry test_midas_tarball --wf midas -c nextflow.config ${BACTOPIA_ARGS}'
  tags:
    - midas
    - midas-tarball
    - bactopia-tools
  files:
    - path: bactopia-tools/midas/midas/SRR2838702/SRR2838702.midas.tsv
      md5sum: 6078fbf9d5c44a56afeb7a42836b14d2
    - path: bactopia-tools/midas/midas/SRR2838702/SRR2838702.midas.abundances.txt
      md5sum: 91f71c7f652445afe3d6d573155ec41b
    - path: bactopia-tools/midas/midas/SRR2838702/SRR2838702.midas.adjusted.abundances.txt
      md5sum: 3658eb6a56f27a066c88eccd22490808
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/nf-midas.begin
      md5sum: d41d8cd98f00b204e9800998ecf8427e
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/nf-midas.err
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/nf-midas.log
      contains: ['MIDAS', 'Command', 'Classifying']
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/nf-midas.out
      contains: ['MIDAS', 'Command', 'Classifying']
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/nf-midas.run
      contains: ['NEXTFLOW TASK', '$NXF_ENTRY']
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/nf-midas.sh
      contains: ['run_midas', 'END_VERSIONS']
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/nf-midas.trace
      contains: ['nextflow.trace']
    - path: bactopia-tools/midas/midas/SRR2838702/logs/midas/versions.yml
      md5sum: 492059fdd4d2e2c34e8ffb0d62a33cc5
    - path: bactopia-tools/midas/midas/nf-reports/midas-dag.dot
      contains: ['midasdag', 'MIDAS_SPECIES', 'versions']
    - path: bactopia-tools/midas/midas/nf-reports/midas-report.html
      contains: ['html', 'Nextflow', 'Report']
    - path: bactopia-tools/midas/midas/nf-reports/midas-timeline.html
      contains: ['html', 'Nextflow', 'timeline']
    - path: bactopia-tools/midas/midas/nf-reports/midas-trace.txt
      contains: ['task_id']
