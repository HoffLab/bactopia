- name: tbprofiler-test
  command: bash -c 'nextflow run ./subworkflows/local/tbprofiler/test.nf -entry test_tbprofiler --wf tbprofiler -c nextflow.config ${BACTOPIA_ARGS}'
  tags:
    - tbprofiler
    - bactopia-tools
  files:
    - path: bactopia/bactopia-runs/tbprofiler/nf-reports/tbprofiler-dag.dot
      contains: ['tbprofilerdag', 'TBPROFILER', 'versions']
    - path: bactopia/bactopia-runs/tbprofiler/nf-reports/tbprofiler-report.html
      contains: ['html', 'Nextflow', 'Report']
    - path: bactopia/bactopia-runs/tbprofiler/nf-reports/tbprofiler-timeline.html
      contains: ['html', 'Nextflow', 'timeline']
    - path: bactopia/bactopia-runs/tbprofiler/nf-reports/tbprofiler-trace.txt
      contains: ['task_id']
    - path: bactopia/test/tools/tbprofiler/bam/test.bam
    - path: bactopia/test/tools/tbprofiler/logs/nf-tbprofiler.begin
      md5sum: d41d8cd98f00b204e9800998ecf8427e
    - path: bactopia/test/tools/tbprofiler/logs/nf-tbprofiler.err
      contains: ['tbprofiler', 'Running', 'finished']
    - path: bactopia/test/tools/tbprofiler/logs/nf-tbprofiler.log
      contains: ['tbprofiler', 'Running', 'finished']
    - path: bactopia/test/tools/tbprofiler/logs/nf-tbprofiler.out
    - path: bactopia/test/tools/tbprofiler/logs/nf-tbprofiler.run
      contains: ['NEXTFLOW TASK', '$NXF_ENTRY']
    - path: bactopia/test/tools/tbprofiler/logs/nf-tbprofiler.sh
      contains: ['tb-profiler', 'END_VERSIONS']
    - path: bactopia/test/tools/tbprofiler/logs/nf-tbprofiler.trace
      contains: ['nextflow.trace']
    - path: bactopia/test/tools/tbprofiler/logs/versions.yml
      md5sum: 55cbf072aba045eb75137cad49b938b0
    - path: bactopia/test/tools/tbprofiler/test.results.csv
      contains: ['gid', 'Analysis', 'freebayes']
    - path: bactopia/test/tools/tbprofiler/test.results.json
      contains: ['locus_tag', 'tbprofiler_version', 'median_coverage']
    - path: bactopia/test/tools/tbprofiler/test.results.txt
      contains: ['gid', 'Analysis', 'freebayes']
    - path: bactopia/test/tools/tbprofiler/vcf/test.targets.csq.vcf.gz
